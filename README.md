# Лабораторная работа: Containers08

## Цель работы

Создать простое веб-приложение на PHP, работающее в Docker-контейнере с базой данных SQLite, реализовать автоматические тесты и настроить CI с помощью GitHub Actions.

## Задание

- Реализовать веб-приложение с использованием SQLite.
- Организовать структуру проекта.
- Настроить CI/CD процесс.
- Написать и запустить тесты.
- Подготовить README.md с описанием проекта.

## Описание выполнения работы

### Шаг 1: Создание структуры проекта

Созданы директории:

### Шаг 2: Создание файлов

Файлы были созданы вручную через Notepad (например, `notepad site\modules\database.php`) и содержат корректный PHP-код и SQL-скрипты.

### Шаг 3: Работа с Git

- `git init`
- `git remote add origin https://github.com/Mitcov9847/containers08.git`
- `git add .`
- `git commit -m "Initial commit with PHP web app, test."`
- `git branch -m master main`
- `git push origin main`

### Шаг 4: Настройка CI

Создан `.github/workflows/main.yml`, настроенный на запуск при пуше в ветку `main`.

### Шаг 5: Проверка CI

После пуша CI прошёл успешно:
- Docker-образ собран.
- Контейнер запущен.
- Все тесты (7 из 7) успешно выполнены.

### Шаг 6: Локальное тестирование

- `docker build -t containers08 .`
- `docker run -d --name container -p 8000:9000 -v database:/var/www/db containers08`
- Приложение работает по адресу: http://localhost:8000/index.php?page=1
- Тесты запускались через:
  ```sh
  docker cp tests container:/var/www/html

# Ответы на вопросы

## Что такое непрерывная интеграция?

**Непрерывная интеграция (CI)** — это процесс автоматического объединения изменений в коде, созданных несколькими разработчиками, в основной репозиторий. Основной задачей CI является автоматическое выполнение тестов и сборки проекта при каждом коммите или Pull Request, что помогает быстро находить и устранять ошибки.

## Для чего нужны юнит-тесты? Как часто их нужно запускать?

**Юнит-тесты** проверяют правильность работы отдельных компонентов программы (например, функций или классов) в изоляции от других частей. 

Юнит-тесты нужны для:
- Раннего обнаружения ошибок.
- Повышения надёжности кода.
- Упрощения сопровождения проекта.

**Запускать юнит-тесты нужно:**
- при каждом изменении кода;
- при каждом коммите;
- автоматически через CI при каждом пуше и Pull Request.

## Что нужно изменить в файле `.github/workflows/main.yml`, чтобы тесты запускались при каждом Pull Request?

Нужно изменить блок `on` следующим образом:

```yaml
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

## Что нужно добавить в файл `.github/workflows/main.yml`, чтобы удалять созданные Docker-образы после выполнения тестов?

Для удаления созданного Docker-образа после выполнения тестов, нужно добавить следующий шаг в конец списка `steps` в вашем CI-файле:

```yaml
- name: Remove Docker image
  run: docker rmi containers08 || true
